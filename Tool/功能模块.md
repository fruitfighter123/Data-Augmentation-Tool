## 功能模块

该工具主要包括两个功能模块：

1.掩膜处理。

2.生成合成图像。

### PART1 掩膜处理

掩膜处理主要是根据输入的产品图像来提取一个精确的掩膜，让生成的图像没有任何不切实际的边缘或伪影。使用fix-colored背景提取不能获得精确的掩膜，尤其是背景颜色与产品本身颜色非常相似的时候，所以采用该功能来提取掩膜更精确也更加自动化。掩膜处理的算法详解在核心算法中有阐述。

### PART2 数据交互

我们在掩膜处理以后就可以获取到已经提取好的产品掩膜。为了方便与第二功能模块的交互，我进行了特殊的阈值处理。获得产品掩膜如下图所示。

<img src="In-process product/new1.jpg" style="zoom:10%;" />

<img src="In-process product/new2.jpg" style="zoom:10%;" />

<img src="In-process product/new5.jpg" style="zoom:10%;" >

这些图片作为第二部分的输入进行处理。

### PART3 生成合成图像

生成合成图像的功能主要是将获取到的单个的产品掩膜合成在一张图片上，合成并不是随机的，而是根据重叠率来设计的。根据不同的重叠率可以设计不同识别难度的数据集，重叠率代表着物品之间的重叠的部分的多少。生成是随机的，每次执行生成的图像都有所不同，随着输入的改变也可以改变，每次随机选择四个图像，两个作为背景，另外两个作为前景（可以对前景物体旋转任意角度），然后两两融合，形成一个图中四个物体。算法详见核心算法。生成的合成图像示例如图。

<img src="Output/image_fusion1.jpg" style="zoom:10%;" />
